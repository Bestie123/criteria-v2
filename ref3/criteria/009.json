{
  "id": "009",
  "text": "Система уникальных идентификаторов блоков: генерация UUID v4 или custom BLOCK_ID при создании, гарантия глобальной уникальности, неизменность ID на протяжении жизненного цикла, использование в ссылках и упоминаниях, хранение в data-атрибутах DOM, индексация для быстрого поиска O(1), валидация при загрузке, интеграция с версионированием и историей изменений",
  "categories": [
    "ai-criteria",
    "architecture",
    "editor",
    "quality"
  ],
  "tags": [
    "BLOCK_ID",
    "ID",
    "UUID",
    "блоки",
    "валидация",
    "индексация",
    "уникальность"
  ],
  "categories_info": [
    {
      "key": "editor",
      "title": "Движок редактора",
      "description": "Требования к ядру редактора"
    }
  ],
  "contexts": {
    "architecture": {
      "subcategories": [],
      "descriptions": {
        "null": "Архитектурный принцип уникальной идентификации: каждый блок в системе имеет глобально уникальный идентификатор который служит первичным ключом для адресации блока, ID является неизменяемым на протяжении всего жизненного цикла блока (не меняется при редактировании, перемещении, копировании), ID используется как основа для построения связей между блоками (ссылки, embeds, backlinks), система гарантирует уникальность ID через централизованную генерацию или валидацию, ID позволяет однозначно идентифицировать блок независимо от его местоположения в документе или иерархии, архитектура поддерживает различные форматы ID (UUID, custom схемы) через абстракцию"
      }
    },
    "editor": {
      "subcategories": [
        "Блоки контента"
      ],
      "descriptions": {
        "Блоки контента": "Реализация системы уникальных идентификаторов блоков: 1) Генерация ID - автоматическая генерация UUID v4 при создании нового блока (гарантия уникальности через криптографически стойкий генератор случайных чисел), альтернативно custom BLOCK_ID схема (например timestamp + counter + random), генерация ID на клиенте для offline-first подхода, синхронизация ID между клиентами в multiplayer режиме, валидация формата ID при создании (соответствие UUID v4 или custom схеме). 2) Хранение ID - ID хранится в поле id объекта блока в памяти и базе данных, ID добавляется в DOM как data-атрибут (data-block-id) для отладки и трассировки, ID используется как ключ в индексах и хэш-таблицах для быстрого поиска O(1), ID сохраняется при сериализации блока в JSON, ID передается в API запросах для идентификации блока. 3) Неизменность ID - ID блока не изменяется при редактировании содержимого блока, ID сохраняется при перемещении блока внутри документа или между документами, при копировании блока генерируется новый уникальный ID для копии, при импорте блоков из внешних источников сохраняются оригинальные ID если возможно (с проверкой на конфликты), история изменений блока привязана к его ID для отслеживания всех операций. 4) Использование ID в ссылках - @-упоминания блоков используют ID для создания ссылок (@block:uuid), block references и embeds ссылаются на блоки по ID, backlinks автоматически отслеживаются через индекс ID → ссылающиеся блоки, граф зависимостей строится на основе связей между ID блоков, при удалении блока все ссылки на его ID помечаются как битые. 5) Индексация и поиск - создание индекса ID → блок для мгновенного поиска блока по ID O(1), индекс обновляется при создании/удалении блоков, API метод getBlockById(id) использует индекс для быстрого доступа, поиск блоков по частичному совпадению ID (для отладки), экспорт списка всех ID в документе для аудита. 6) Валидация уникальности - проверка уникальности ID при создании блока (поиск в индексе), валидация всех ID при загрузке документа (обнаружение дубликатов), автоматическая регенерация ID при обнаружении конфликтов (с сохранением истории старого ID), предупреждение пользователя о найденных дубликатах ID, логирование всех случаев конфликтов ID для анализа. 7) Интеграция с версионированием - каждая версия блока в истории изменений привязана к его ID, возможность восстановить блок по ID из любой точки истории, отслеживание перемещений блока через историю изменений его parent_id, экспорт истории изменений конкретного блока по ID, сравнение версий блока по ID для показа diff"
      }
    },
    "quality": {
      "subcategories": [
        "Архитектурная целостность"
      ],
      "descriptions": {
        "Архитектурная целостность": "Требования к качеству системы ID: тестирование уникальности генерации ID (запуск генератора миллион раз без коллизий), тестирование производительности поиска по ID (должен быть O(1) через хэш-таблицу), валидация формата ID через регулярные выражения или JSON Schema, автоматические тесты на обнаружение дубликатов ID в документе, стресс-тестирование системы ID при большом количестве блоков (100k+ блоков), тестирование синхронизации ID между клиентами в multiplayer режиме, документация формата ID и правил генерации, примеры корректных и некорректных ID, метрики: процент успешных генераций ID без конфликтов (должен быть 100%), среднее время поиска блока по ID (должно быть <1ms), количество обнаруженных дубликатов ID за период"
      }
    },
    "ai-criteria": {
      "subcategories": [],
      "descriptions": {
        "null": "Требования к ИИ для работы с ID блоков: понимание концепции уникальных идентификаторов и их роли в системе, использование ID при генерации ссылок на блоки (@block:uuid вместо названия), сохранение ID при рефакторинге блоков (разбиение/объединение), генерация корректных ID при создании новых блоков через API, валидация ID в сгенерированном контенте перед вставкой, предложение исправления битых ссылок на основе анализа ID, автоматическое обновление ссылок при изменении ID блока (если требуется), генерация отчетов о состоянии ID в документе (дубликаты, битые ссылки, orphaned blocks)"
      }
    }
  }
}