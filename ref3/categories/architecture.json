{
  "version": "3.0",
  "generated": true,
  "category": "architecture",
  "name": "Общие архитектурные принципы для движка",
  "description": "Фундаментальные правила построения всей системы",
  "criteria": [
    {
      "id": "001",
      "text": "Критическая архитектура (ядро, фундамент, несущие стены)",
      "tags": [
        "ядро",
        "фундамент",
        "критическое"
      ]
    },
    {
      "id": "002",
      "text": "Модульность архитектуры",
      "tags": [
        "модульность"
      ]
    },
    {
      "id": "003",
      "text": "Блочная архитектура редактора: каждый элемент контента (абзац, заголовок, таблица, изображение, формула, диаграмма, код) является независимым блоком с уникальным ID, типом, содержимым, метаданными, поддержкой вложенности и CRUD операций через API",
      "tags": [
        "API",
        "CRUD",
        "UUID",
        "блоки",
        "вложенность",
        "независимость",
        "типы блоков"
      ]
    },
    {
      "id": "004",
      "text": "Взаимодействие в реальном времени: живое обновление всех связанных элементов при изменении источника без перезагрузки страницы, block references и embeds с автоматическим обновлением контента при изменении оригинального блока, синхронизация связанных данных между таблицами, диаграммами, формулами и текстом в реальном времени, использование WebSocket или Server-Sent Events (SSE) для двусторонней связи клиент-сервер, optimistic updates с мгновенным отображением изменений и последующей синхронизацией с сервером, conflict resolution при одновременном редактировании одного элемента несколькими пользователями, автоматический rollback при ошибках синхронизации, визуальная индикация статуса синхронизации (синхронизировано, синхронизация, ошибка), offline-first подход с локальным кэшированием и синхронизацией при восстановлении соединения, event-driven архитектура для реактивного обновления UI, debouncing и throttling для оптимизации частоты обновлений",
      "tags": [
        "реальное время",
        "live updates",
        "WebSocket",
        "синхронизация",
        "block references",
        "reactive",
        "offline-first"
      ]
    },
    {
      "id": "005",
      "text": "Система плагинов и расширяемости: архитектура плагинов с изолированными папками и манифестами (plugin.json), официальный магазин плагинов с рейтингами, API для создания плагинов (JavaScript, TypeScript, Rust, WASM), поддержка популярных типов (диаграммы Mermaid/Excalidraw/tldraw, математика KaTeX, таблицы Advanced Tables, канбан, календари, PDF-аннотации, AI-плагины), веб-хуки для внешних интеграций, sandbox изоляция для безопасности, lifecycle управление (load, enable, disable, unload), версионирование и автоматическое обновление, точки расширения через hooks и events, dependency injection, валидация плагинов перед публикацией",
      "tags": [
        "API",
        "Advanced Tables",
        "Excalidraw",
        "JavaScript",
        "KaTeX",
        "Mermaid",
        "Rust",
        "WASM",
        "dependency injection",
        "hooks",
        "lifecycle",
        "sandbox",
        "tldraw",
        "версионирование",
        "веб-хуки",
        "магазин плагинов",
        "плагины",
        "расширяемость"
      ]
    },
    {
      "id": "006",
      "text": "Организация модулей",
      "tags": [
        "модули"
      ]
    },
    {
      "id": "007",
      "text": "Инкрементальное развитие",
      "tags": [
        "инкрементальность"
      ]
    },
    {
      "id": "009",
      "text": "Система уникальных идентификаторов блоков: генерация UUID v4 или custom BLOCK_ID при создании, гарантия глобальной уникальности, неизменность ID на протяжении жизненного цикла, использование в ссылках и упоминаниях, хранение в data-атрибутах DOM, индексация для быстрого поиска O(1), валидация при загрузке, интеграция с версионированием и историей изменений",
      "tags": [
        "BLOCK_ID",
        "ID",
        "UUID",
        "блоки",
        "валидация",
        "индексация",
        "уникальность"
      ]
    },
    {
      "id": "044",
      "text": "Оптимизация перерисовки и рендеринга: оптимизация алгоритмов перерисовки в реальном времени для плавного UX, минимизация reflows и repaints через batching изменений DOM, использование Virtual DOM или аналогов для эффективного обновления, мемоизация компонентов для предотвращения лишних re-renders, debouncing и throttling для частых операций, requestAnimationFrame для плавных анимаций, CSS containment и will-change для оптимизации layout, измерение FPS и frame drops",
      "tags": [
        "производительность",
        "рендеринг",
        "перерисовка",
        "reflow",
        "repaint",
        "Virtual DOM",
        "мемоизация",
        "FPS",
        "оптимизация"
      ]
    },
    {
      "id": "059",
      "text": "Использовать структурированную идентификацию элементов (проект → модуль → компонент) для навигации и управления контекстом",
      "tags": [
        "ID",
        "навигация"
      ]
    },
    {
      "id": "064",
      "text": "Использовать структурированные имена для элементов проекта (например, project-module-component) для лучшей навигации и понимания контекста",
      "tags": [
        "именование"
      ]
    },
    {
      "id": "067",
      "text": "Отслеживать и исключать циклические зависимости между модулями: автоматическое обнаружение циклов через инструменты анализа (madge, dependency-cruiser, ESLint plugins), визуализация графа зависимостей для выявления циклов, рефакторинг архитектуры для разрыва циклических связей через dependency inversion и введение абстракций, проверка отсутствия циклов в CI/CD pipeline, документирование правил предотвращения циклических зависимостей",
      "tags": [
        "circular dependencies",
        "зависимости",
        "циклические зависимости"
      ]
    },
    {
      "id": "087",
      "text": "Принцип DRY (Don't Repeat Yourself): избегать дублирования кода через переиспользование модулей, функций и компонентов, извлечение общей логики в utility functions, shared modules, composition patterns, HOC, mixins, создание библиотек переиспользуемых компонентов, применение паттернов проектирования для устранения повторений, рефакторинг дублирующегося кода в централизованные решения",
      "tags": [
        "DRY",
        "переиспользование",
        "utility functions",
        "shared modules",
        "composition",
        "HOC",
        "mixins",
        "рефакторинг",
        "дублирование"
      ]
    },
    {
      "id": "090",
      "text": "Точки расширения системы",
      "tags": [
        "расширяемость"
      ]
    },
    {
      "id": "092",
      "text": "Единая структура и архитектура: все модули следуют единым паттернам проектирования, структуре файлов, API-контрактам, обработке ошибок и документированы в централизованном источнике истины",
      "tags": [
        "единообразие"
      ]
    },
    {
      "id": "101",
      "text": "Трассировка и просмотр всех идентификаторов (MODULE_ID, FUNC_ID, COMP_ID, NODE_ID, BLOCK_ID) через DevTools и Puppeteer+CDP: data-атрибуты в HTML для инспектора, console.log при вызове функций с ID, встроенная панель DevTools для поиска/копирования ID, интерактивность (клик → копирование ID, поиск по ID, переход к коду), автоматическая трассировка через CDP для программного доступа к ID",
      "tags": [
        "ID",
        "трассировка"
      ]
    },
    {
      "id": "103",
      "text": "Автоматически генерировать уникальные идентификаторы (MODULE_ID, FUNC_ID) в виде JSDoc-комментариев в начале каждого модуля и функции для упрощения отладки, навигации и работы ИИ-ассистента с кодом",
      "tags": [
        "ID",
        "автоматизация"
      ]
    },
    {
      "id": "104",
      "text": "Автоматическое отслеживание и защита ID в DOM: MutationObserver для всех изменений (добавление/удаление/изменение элементов и атрибутов), перехват DOM-методов (appendChild/innerHTML), WeakMap резервное хранилище, автоназначение ID элементам без ID, логирование с stack trace, режимы production (WeakMap) и development (полное логирование)",
      "tags": [
        "ID",
        "защита"
      ]
    },
    {
      "id": "105",
      "text": "Отладка динамических элементов через DevTools: при клике на элемент в инспекторе показывать stack trace создания (где в коде создан), FUNC_ID функции-создателя, MODULE_ID модуля, копирование ID и контекста в буфер для передачи ИИ, подсветка в коде места создания элемента",
      "tags": [
        "отладка",
        "DevTools"
      ]
    },
    {
      "id": "110",
      "text": "Single Responsibility Principle (SRP): каждый модуль, класс или функция должны иметь только одну причину для изменения",
      "tags": [
        "SOLID",
        "SRP"
      ]
    },
    {
      "id": "111",
      "text": "Open/Closed Principle (OCP): модули должны быть открыты для расширения, но закрыты для модификации",
      "tags": [
        "SOLID",
        "OCP"
      ]
    },
    {
      "id": "112",
      "text": "Liskov Substitution Principle (LSP): объекты должны быть заменяемы экземплярами их подтипов без нарушения корректности программы",
      "tags": [
        "SOLID",
        "LSP"
      ]
    },
    {
      "id": "113",
      "text": "Interface Segregation Principle (ISP): клиенты не должны зависеть от интерфейсов, которые они не используют",
      "tags": [
        "SOLID",
        "ISP"
      ]
    },
    {
      "id": "114",
      "text": "Dependency Inversion Principle (DIP): модули верхнего уровня не должны зависеть от модулей нижнего уровня, оба должны зависеть от абстракций",
      "tags": [
        "SOLID",
        "DIP"
      ]
    },
    {
      "id": "157",
      "text": "Исключение монолитности файлов: принцип разбиения кода на модули для предотвращения монолитных файлов, ограничение размера файла (рекомендуется до 500 строк кода), разделение ответственности по файлам (один файл - одна ответственность по SRP), выделение модулей, стилей, скриптов, изображений в отдельные файлы, рефакторинг больших файлов на более мелкие компоненты, улучшение читаемости и поддерживаемости через модульную структуру, упрощение навигации и понимания кода",
      "tags": [
        "модульность",
        "файлы",
        "разбиение",
        "500 строк"
      ]
    },
    {
      "id": "169",
      "text": "Unit-архитектура: страницы/документы как независимые контейнеры с уникальным ID, заголовком, метаданными и упорядоченным списком блоков, поддерживающие вложенность страниц, навигацию и CRUD операции через API",
      "tags": [
        "Unit",
        "страницы",
        "документы",
        "контейнер",
        "иерархия",
        "навигация",
        "метаданные",
        "UNIT_ID"
      ]
    },
    {
      "id": "172",
      "text": "Масштабируемость и производительность для больших объемов данных: обеспечение стабильной работы при 10,000+ страниц и 100,000+ блоков через ленивую загрузку контента (lazy loading), виртуализацию списков (virtual scrolling) для рендеринга только видимых элементов, pagination и infinite scroll для постепенной загрузки данных, code splitting и tree shaking для оптимизации bundle size, performance budgets и мониторинг метрик (FCP, LCP, TTI, TBT), кэширование стратегии (memory cache, disk cache, service workers), оптимизация критических путей рендеринга",
      "tags": [
        "масштабируемость",
        "производительность",
        "lazy loading",
        "виртуализация",
        "virtual scrolling",
        "pagination",
        "infinite scroll",
        "code splitting",
        "performance budget",
        "кэширование"
      ]
    },
    {
      "id": "173",
      "text": "Индексация и полнотекстовый поиск в больших объемах данных: реализация full-text search для быстрого поиска по 10,000+ страниц и 100,000+ блоков через search indexes (Lunr.js, FlexSearch, MiniSearch, Fuse.js), инкрементальная индексация при создании/изменении контента, поддержка сложных запросов (AND, OR, NOT, фразовый поиск, wildcard), фильтрация и сортировка результатов по релевантности, кэширование результатов поиска, fuzzy search для опечаток, highlighting найденных фрагментов, search suggestions и autocomplete",
      "tags": [
        "индексация",
        "поиск",
        "full-text search",
        "search index",
        "Lunr.js",
        "FlexSearch",
        "фильтрация",
        "сортировка",
        "fuzzy search",
        "autocomplete"
      ]
    },
    {
      "id": "176",
      "text": "Агентная система разработки с ИИ: multi-agent архитектура с специализированными агентами (Architect Agent для проектирования архитектуры, Coder Agent для написания кода, Reviewer Agent для код-ревью, Tester Agent для тестирования, Debugger Agent для отладки, Documentation Agent для документации), координация агентов через центральный orchestrator с распределением задач, автономное выполнение задач агентами с минимальным вмешательством человека, коммуникация между агентами через message bus и shared context, планирование и декомпозиция сложных задач на подзадачи для агентов, параллельное выполнение независимых задач разными агентами, self-healing система с автоматическим исправлением ошибок, continuous learning агентов на основе обратной связи и результатов, интеграция с существующими критериями проекта как knowledge base для агентов, workflow orchestration с state machine для процессов разработки, мониторинг и логирование действий агентов, human-in-the-loop для критических решений, rollback механизм при ошибках агентов",
      "tags": [
        "AI agents",
        "continuous learning",
        "human-in-the-loop",
        "message bus",
        "multi-agent",
        "orchestrator",
        "self-healing",
        "workflow",
        "автоматизация",
        "автономность",
        "агенты",
        "декомпозиция",
        "координация",
        "мониторинг",
        "параллелизм"
      ]
    },
    {
      "id": "177",
      "text": "Многопоточность и устойчивость к высоким нагрузкам: использование Web Workers для параллельного выполнения тяжелых вычислений (парсинг больших документов, индексация для поиска, обработка изображений, сложные вычисления) вне main thread для сохранения отзывчивости UI, SharedArrayBuffer для обмена данными между потоками без копирования, worker pools для переиспользования workers и управления их количеством, offscreen canvas в workers для рендеринга графики, graceful degradation при недоступности workers, rate limiting и throttling для предотвращения перегрузки (ограничение частоты запросов, debouncing пользовательского ввода, queue management для задач), circuit breaker pattern для защиты от каскадных сбоев, backpressure механизмы для контроля потока данных, connection pooling для эффективного использования ресурсов, load balancing между серверами/workers, auto-scaling при увеличении нагрузки, health checks и мониторинг состояния системы, error recovery с автоматическими retry и exponential backoff, timeout management для предотвращения зависаний",
      "tags": [
        "Web Workers",
        "SharedArrayBuffer",
        "worker pools",
        "offscreen canvas",
        "многопоточность",
        "параллелизм",
        "rate limiting",
        "throttling",
        "circuit breaker",
        "backpressure",
        "load balancing",
        "auto-scaling",
        "устойчивость",
        "нагрузка",
        "resilience"
      ]
    },
    {
      "id": "179",
      "text": "Встроенная AI-интеграция для пользователей редактора: AI-ассистент для генерации, редактирования и улучшения контента (текст, таблицы, диаграммы, код), автоматический рефакторинг и улучшение написанного, автосвязи между блоками на основе семантического анализа, автотеги и категоризация контента, чат с собственной базой знаний (RAG) для поиска и ответов на вопросы, поддержка множественных AI-провайдеров (OpenAI, Anthropic, Google, локальные модели), интеграция локальных моделей (Ollama, LM Studio, LocalAI) через плагины, настраиваемые AI-команды и промпты, контекстные AI-предложения, summarization длинных документов",
      "tags": [
        "AI",
        "AI-генерация",
        "Anthropic",
        "Claude",
        "GPT",
        "LM Studio",
        "LocalAI",
        "NLP",
        "Ollama",
        "OpenAI",
        "RAG",
        "UI",
        "autocomplete",
        "автокатегоризация",
        "автосвязи",
        "автотеги",
        "генерация контента",
        "локальные модели",
        "плагины",
        "рефакторинг",
        "семантический анализ",
        "чат с базой знаний"
      ]
    },
    {
      "id": "182",
      "text": "Принцип минимизации зависимостей между модулями через абстракции, интерфейсы, dependency injection, event-driven архитектуру. Модули взаимодействуют через контракты, а не конкретные реализации. Паттерны: Observer, Mediator, DI, Service Locator, Event Bus",
      "tags": [
        "Event Bus",
        "Mediator",
        "Observer",
        "Service Locator",
        "dependency injection",
        "event-driven",
        "interfaces",
        "loose coupling",
        "message bus"
      ]
    },
    {
      "id": "185",
      "text": "Electron.js для создания кроссплатформенных desktop приложений на базе веб-технологий (HTML/CSS/JS): нативный доступ к файловой системе и системным API, полноценная оффлайн работа, автоматические обновления, нативные меню и системный трей, интеграция с ОС (notifications, shortcuts), упаковка в exe/dmg/deb, встроенный Chromium и Node.js",
      "tags": [
        "Chromium",
        "Electron",
        "Node.js",
        "desktop",
        "кроссплатформенность",
        "нативные API",
        "оффлайн"
      ]
    }
  ]
}
